# Helm: A Package Manager for Kubernetes

## Overview
Helm is a powerful package manager for Kubernetes, designed to simplify the deployment and management of applications in a Kubernetes cluster. It provides a convenient way to define, install, and upgrade complex Kubernetes applications through reusable and shareable packages called **Helm charts**.

---

## Installing Helm

### Using Snap
```bash
sudo snap install helm --classic
```

For additional installation methods, refer to the official [Helm Installation Guide](https://helm.sh/docs/intro/install/).

---

## Helm Charts
A **Helm chart** is a collection of files that contains all the instructions needed to deploy an application on a Kubernetes cluster. It includes templates, configuration values, and metadata. 

### Key Components of a Helm Chart:
1. **values.yml**: Contains default values to substitute for variables in templates.
2. **Chart.yml**: Provides metadata about the chart, such as the version, name, and description.

#### Chart.yml Structure
```yaml
apiVersion: v2 # API version for Helm (v1 for Helm 2, v2 for Helm 3)
name: my-chart # Name of the chart
description: A brief description of the chart
version: 1.0.0 # Version of the chart
appVersion: 1.2.3 # Version of the application deployed
keywords: # Keywords associated with the project
  - example
  - helm
maintainers: # Maintainer information
  - name: John Doe
    email: john.doe@example.com
dependencies: # Dependencies for the chart (optional)
  - name: dependency-chart
    version: 1.0.0
    repository: https://example.com/charts
```
Optional parameters include `home` (homepage URL) and `icon` (logo image path).

### Note:
- Helm 2 uses `apiVersion: v1`.
- Helm 3 uses `apiVersion: v2`.

---

## Key Concepts

### Release
A **release** is a single installation of an application using a Helm chart. Multiple releases can be created using the same chart with different configurations.

### Revision
A **revision** is a snapshot of a deployed application at a specific point in time. Each update to the release generates a new revision.

### Metadata Storage
Helm metadata is stored in the cluster as a **Kubernetes Secret**.

---

## Customizing Chart Parameters

1. **Command Line Parameters**
   ```bash
   helm install --set <parameter>=<value> <chart>
   ```
   Overrides specific values in the `values.yml` file.

2. **Custom values.yml File**
   ```bash
   helm install --values <custom-values.yml> <chart>
   ```
   Uses a custom `values.yml` file to override the default values.

3. **Editing values.yml Locally**
   ```bash
   helm pull --untar <chart>
   ```
   - Downloads and unarchives a chart locally.
   - Edit the `values.yml` file in the extracted directory.
   - Install the chart:
     ```bash
     helm install <release-name> <path-to-unarchived-directory>
     ```

---

## Common Helm Commands

### Installation and Upgrades
- **Install a chart**:
  ```bash
  helm install <release-name> <chart-name>
  ```
  
- **Upgrade a release**:
  ```bash
  helm upgrade <release-name> <chart-name>
  ```

### Repositories and Search
- **Manage repositories**:
  ```bash
  helm repo <action> <arguments>
  ```
  Actions include `add`, `delete`, `view`, and `update`.

- **Search for charts**:
  ```bash
  helm search <hub/repo> <name>
  ```

### Rollbacks and History
- **Rollback a release**:
  ```bash
  helm rollback <release-name> <revision-number>
  ```
  Note: Rollbacks do not affect data generated by applications, such as database contents.

- **View release history**:
  ```bash
  helm history <release-name>
  ```

### Chart Management
- **Pull a chart locally**:
  ```bash
  helm pull <chart>
  ```

- **Create a new chart**:
  ```bash
  helm create <chart-name>
  ```

- **List all releases**:
  ```bash
  helm list
  ```

- **Uninstall a release**:
  ```bash
  helm uninstall <release-name>
  ```

---

## Writing a Helm Chart

### Step 1: Create the Chart Structure
```bash
helm create <chart-name>
```
This generates a directory with the following structure:
```
<chart-name>/
  Chart.yml
  values.yml
  templates/
  charts/
```

### Step 2: Define Manifests and Templates
Edit the `templates/` directory to include Kubernetes manifests. Use placeholders to define dynamic values that reference `values.yml`.

### Step 3: Install the Chart
```bash
helm install <release-name> <path-to-chart>
```

#### Templating Conventions
- Predefined objects:
  - `.Release.Name`, `.Chart.Name`, `.Capabilities.KubeVersion`
- Values from `values.yml`:
  - `.Values.<variable-name>` (e.g., `.Values.replicaCount`)

---

## Conclusion
Helm simplifies Kubernetes application management by packaging application configurations and templates into reusable charts. Its powerful templating and customization capabilities make it an essential tool for managing complex deployments efficiently.

---

For more information, visit the [Helm Documentation](https://helm.sh/docs/).

